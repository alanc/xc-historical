XCOMM $XConsortium: Imakefile,v 1.152 93/09/04 20:46:11 rws Exp $
#define DoNormalLib NormalLibX
#define DoSharedLib SharedLibX
#define DoDebugLib DebugLibX
#define DoProfileLib ProfileLibX
#define LibName X11
#define SoRev SOXLIBREV
#define HugeLibrary YES

#ifndef MotifBC
#define MotifBC NO
#endif

#ifndef BuildXimp
#define BuildXimp NO
#endif
#ifndef BuildXsi
#if !BuildXimp
#define BuildXsi YES
#endif
#endif
#if BuildXsi
#ifndef BuildLocalIM
#define BuildLocalIM YES
#endif
#endif

#ifdef SharedXlibReqs
REQUIREDLIBS = SharedXlibReqs
#endif
#ifdef MacIIArchitecture
XBSDLIB = /**/
#endif
#if Malloc0ReturnsNull
     MALLOC_DEFINES = -DMALLOC_0_RETURNS_NULL
#endif
#if HasXdmAuth
        XDMAUTHDEFS = -DHASXDMAUTH
        XDMAUTHOBJS = Wrap.o Wraphelp.o
        XDMAUTHSRCS = Wrap.c Wraphelp.c
#endif
#if HasSecureRPC
        RPCDEFS = -DSECURE_RPC
#endif
#if HasPoll
   POLL_DEFINES = -DUSE_POLL
#endif
   CONN_DEFINES = ConnectionFlags
#if HasBSD44Sockets
   SOCK_DEFINES = -DBSD44SOCKETS
#endif
     EDB_DEFINES = -DERRORDB=\"$(LIBDIR)/XErrorDB\"
     KDB_DEFINES = -DKEYSYMDB=\"$(LIBDIR)/XKeysymDB\"
     CMS_DEFINES = -DXCMSDB=\"$(LIBDIR)/Xcms.txt\"
     NLS_DEFINES = -DXNLSPATHDEFAULT=\"$(NLSDIR)\"
#if MotifBC
      BC_DEFINES = -DMOTIFBC
#endif
#if NoRConst
 RCONST_DEFINES = -DNORCONST
#endif
    MTX_DEFINES = XMTDefines
    MTT_DEFINES = ThreadTypeDefines

        DEFINES = $(MALLOC_DEFINES) $(MTX_DEFINES)
 DEPEND_DEFINES = -I$(EXTINCSRC) $(MTT_DEFINES)
   INSTALLFLAGS = $(INSTINCFLAGS)
       AUTHOBJS = AuDispose.o AuGetBest.o AuFileName.o AuRead.o 
       AUTHSRCS = AuDispose.c AuGetBest.c AuFileName.c AuRead.c 
           SRCS = $(SRCS1) $(SRCS2) $(SRCS3) /* try *.c if you have trouble */
        HEADERS = Xlib.h Xresource.h Xutil.h cursorfont.h Xlibint.h \
			Xcms.h Xlocale.h
       LINTLIBS =

SRCS1 = \
	Context.c \
	Depths.c \
	ParseCmd.c \
	Quarks.c \
	AllCells.c \
	AllPlanes.c \
	AllowEv.c \
	AutoRep.c \
	Backgnd.c \
	BdrWidth.c \
	Bell.c \
	Border.c \
	ChAccCon.c \
	ChClMode.c \
	ChActPGb.c \
	ChCmap.c \
	ChGC.c \
	ChKeyCon.c \
	ChPntCon.c \
	ChProp.c \
	ChSaveSet.c \
	ChWAttrs.c \
	ChWindow.c \
	ChkIfEv.c \
	ChkMaskEv.c \
	ChkWinEv.c \
	ChkTypEv.c \
	ChkTypWEv.c \
	CirWin.c \
	CirWinDn.c \
	CirWinUp.c \
	ClDisplay.c \
	Clear.c \
	ClearArea.c \
	ConfWind.c \
	ConnDis.c \
	ConvSel.c \
	CopyArea.c \
	CopyCmap.c \
	CopyGC.c \
	CopyPlane.c \
	CrBFData.c \
	CrCmap.c \
	CrCursor.c \
	CrGC.c \
	CrGlCur.c \
	CrPFBData.c \
	CrPixmap.c \
	CrWindow.c \
	Cursor.c \
	DefCursor.c \
	DelProp.c \
	DestSubs.c \
	DestWind.c \
	DisName.c \
	DrArc.c \
	DrArcs.c \
	DrLine.c \
	DrLines.c \
	DrPoint.c \
	DrPoints.c \
	DrRect.c \
	DrRects.c \
	DrSegs.c \
	ErrDes.c \
	ErrHndlr.c \
	EvToWire.c \
	FetchName.c \
	FillArc.c \
	FillArcs.c \
	FillPoly.c \
	FillRct.c \
	FillRcts.c \
	Flush.c \
	Font.c \
	FontNames.c \
	FontInfo.c \
	FreeCmap.c \
	FreeCols.c \
	FreeCurs.c \
	FreeEData.c \
	FreeGC.c \
	FreePix.c \
	FSSaver.c \
	GCMisc.c \
	Geom.c \
	GetAtomNm.c \
	GetColor.c \
	GetDflt.c \
	GetFPath.c \
	GetFProp.c \
	GetGeom.c \
	GetHColor.c \
	GetHints.c \
	GetIFocus.c \
	GetImage.c \
	GetKCnt.c \
	GetMoEv.c \
	GetPCnt.c \
	GetPntMap.c \
	GetProp.c \
	GetSOwner.c \
	GetSSaver.c \
	GetStCmap.c \
	GetWAttrs.c \
	GrButton.c \
	GrKey.c \
	GrKeybd.c \
	GrPointer.c \
	GrServer.c \
	Host.c \
	IfEvent.c \
	ImUtil.c \
	ImText.c \
	ImText16.c \
	InitExt.c \
	InsCmap.c \
	IntAtom.c \
	KeyBind.c \
	KeysymStr.c \
	KillCl.c \
	LiHosts.c \
	LiICmaps.c \
	LiProps.c \
	ListExt.c \
	LoadFont.c \
	LookupCol.c \
	LowerWin.c 

OBJS1 = \
	Context.o \
	Depths.o \
	ParseCmd.o \
	Quarks.o \
	AllCells.o \
	AllPlanes.o \
	AllowEv.o \
	AutoRep.o \
	Backgnd.o \
	BdrWidth.o \
	Bell.o \
	Border.o \
	ChAccCon.o \
	ChClMode.o \
	ChActPGb.o \
	ChCmap.o \
	ChGC.o \
	ChKeyCon.o \
	ChPntCon.o \
	ChProp.o \
	ChSaveSet.o \
	ChWAttrs.o \
	ChWindow.o \
	ChkIfEv.o \
	ChkMaskEv.o \
	ChkWinEv.o \
	ChkTypEv.o \
	ChkTypWEv.o \
	CirWin.o \
	CirWinDn.o \
	CirWinUp.o \
	ClDisplay.o \
	Clear.o \
	ClearArea.o \
	ConfWind.o \
	ConnDis.o \
	ConvSel.o \
	CopyArea.o \
	CopyCmap.o \
	CopyGC.o \
	CopyPlane.o \
	CrBFData.o \
	CrCmap.o \
	CrCursor.o \
	CrGC.o \
	CrGlCur.o \
	CrPFBData.o \
	CrPixmap.o \
	CrWindow.o \
	Cursor.o \
	DefCursor.o \
	DelProp.o \
	DestSubs.o \
	DestWind.o \
	DisName.o \
	DrArc.o \
	DrArcs.o \
	DrLine.o \
	DrLines.o \
	DrPoint.o \
	DrPoints.o \
	DrRect.o \
	DrRects.o \
	DrSegs.o \
	ErrDes.o \
	ErrHndlr.o \
	EvToWire.o \
	FetchName.o \
	FillArc.o \
	FillArcs.o \
	FillPoly.o \
	FillRct.o \
	FillRcts.o \
	Flush.o \
	Font.o \
	FontNames.o \
	FontInfo.o \
	FreeCmap.o \
	FreeCols.o \
	FreeCurs.o \
	FreeEData.o \
	FreeGC.o \
	FreePix.o \
	FSSaver.o \
	GCMisc.o \
	Geom.o \
	GetAtomNm.o \
	GetColor.o \
	GetDflt.o \
	GetFPath.o \
	GetFProp.o \
	GetGeom.o \
	GetHColor.o \
	GetHints.o \
	GetIFocus.o \
	GetImage.o \
	GetKCnt.o \
	GetMoEv.o \
	GetPCnt.o \
	GetPntMap.o \
	GetProp.o \
	GetSOwner.o \
	GetSSaver.o \
	GetStCmap.o \
	GetWAttrs.o \
	GrButton.o \
	GrKey.o \
	GrKeybd.o \
	GrPointer.o \
	GrServer.o \
	Host.o \
	IfEvent.o \
	ImUtil.o \
	ImText.o \
	ImText16.o \
	InitExt.o \
	InsCmap.o \
	IntAtom.o \
	KeyBind.o \
	KeysymStr.o \
	KillCl.o \
	LiHosts.o \
	LiICmaps.o \
	LiProps.o \
	ListExt.o \
	LoadFont.o \
	LookupCol.o \
	LowerWin.o 

SRCS2 = \
	Macros.c \
	MapRaised.c \
	MapSubs.c \
	MapWindow.c \
	MaskEvent.c \
	Misc.c \
	ModMap.c \
	MoveWin.c \
	NextEvent.c \
	OpenDis.c \
	ParseCol.c \
	ParseGeom.c \
	PeekEvent.c \
	PeekIfEv.c \
	Pending.c \
	PmapBgnd.c \
	PmapBord.c \
	PolyReg.c \
	PolyTxt.c \
	PolyTxt16.c \
	PutBEvent.c \
	PutImage.c \
	QuBest.c \
	QuColor.c \
	QuColors.c \
	QuCurShp.c \
	QuExt.c \
	QuKeybd.c \
	QuPntr.c \
	QuStipShp.c \
	QuTextE16.c \
	QuTextExt.c \
	QuTileShp.c \
	QuTree.c \
	RaiseWin.c \
	RdBitF.c \
	RecolorC.c \
	ReconfWin.c \
	Region.c \
	RepWindow.c \
	RestackWs.c \
	RotProp.c \
	ScrResStr.c \
	SelInput.c \
	SendEvent.c \
	SetBack.c \
	SetCRects.c \
	SetClMask.c \
	SetClOrig.c \
	SetDashes.c \
	SetFPath.c \
	SetFont.c \
	SetFore.c \
	SetFunc.c \
	SetHints.c \
	SetIFocus.c \
	SetLStyle.c \
	SetPMask.c \
	SetPntMap.c \
	SetSOwner.c \
	SetSSaver.c \
	SetState.c \
	SetStip.c \
	SetStCmap.c \
	SetTile.c \
	SetTSOrig.c \
	StBytes.c \
	StColor.c \
	StColors.c \
	StNColor.c \
	StName.c \
	StrKeysym.c \
	Sync.c \
	Synchro.c \
	Text.c \
	Text16.c \
	TextExt.c \
	TextExt16.c \
	TrCoords.c \
	UndefCurs.c \
	UngrabBut.c \
	UngrabKbd.c \
	UngrabKey.c \
	UngrabPtr.c \
	UngrabSvr.c \
	UninsCmap.c \
	UnldFont.c \
	UnmapSubs.c \
	UnmapWin.c \
	VisUtil.c \
	WarpPtr.c \
	WinEvent.c \
	Window.c \
	WrBitF.c \
	XlibAsync.c \
	XlibInt.c \
	Xrm.c \
	Xstreams.c \
	evtomask.c \
	globals.c \
	GetGCVals.c \
	GetNrmHint.c \
	GetRGBCMap.c \
	GetTxtProp.c \
	GetWMCMapW.c \
	GetWMProto.c \
	Iconify.c \
	PixFormats.c \
	PropAlloc.c \
	ReconfWM.c \
	SetNrmHint.c \
	SetRGBCMap.c \
	SetTxtProp.c \
	SetWMCMapW.c \
	SetWMProto.c \
	StrToText.c \
	TextToStr.c \
	Withdraw.c \
	WMGeom.c \
	WMProps.c \
	$(AUTHSRCS) \
	$(XDMAUTHSRCS)

OBJS2 = \
	Macros.o \
	MapRaised.o \
	MapSubs.o \
	MapWindow.o \
	MaskEvent.o \
	Misc.o \
	ModMap.o \
	MoveWin.o \
	NextEvent.o \
	OpenDis.o \
	ParseCol.o \
	ParseGeom.o \
	PeekEvent.o \
	PeekIfEv.o \
	Pending.o \
	PmapBgnd.o \
	PmapBord.o \
	PolyReg.o \
	PolyTxt.o \
	PolyTxt16.o \
	PutBEvent.o \
	PutImage.o \
	QuBest.o \
	QuColor.o \
	QuColors.o \
	QuCurShp.o \
	QuExt.o \
	QuKeybd.o \
	QuPntr.o \
	QuStipShp.o \
	QuTextE16.o \
	QuTextExt.o \
	QuTileShp.o \
	QuTree.o \
	RaiseWin.o \
	RdBitF.o \
	RecolorC.o \
	ReconfWin.o \
	Region.o \
	RepWindow.o \
	RestackWs.o \
	RotProp.o \
	ScrResStr.o \
	SelInput.o \
	SendEvent.o \
	SetBack.o \
	SetCRects.o \
	SetClMask.o \
	SetClOrig.o \
	SetDashes.o \
	SetFPath.o \
	SetFont.o \
	SetFore.o \
	SetFunc.o \
	SetHints.o \
	SetIFocus.o \
	SetLStyle.o \
	SetPMask.o \
	SetPntMap.o \
	SetSOwner.o \
	SetSSaver.o \
	SetState.o \
	SetStip.o \
	SetStCmap.o \
	SetTile.o \
	SetTSOrig.o \
	StBytes.o \
	StColor.o \
	StColors.o \
	StNColor.o \
	StName.o \
	StrKeysym.o \
	Sync.o \
	Synchro.o \
	Text.o \
	Text16.o \
	TextExt.o \
	TextExt16.o \
	TrCoords.o \
	UndefCurs.o \
	UngrabBut.o \
	UngrabKbd.o \
	UngrabKey.o \
	UngrabPtr.o \
	UngrabSvr.o \
	UninsCmap.o \
	UnldFont.o \
	UnmapSubs.o \
	UnmapWin.o \
	VisUtil.o \
	WarpPtr.o \
	WinEvent.o \
	Window.o \
	WrBitF.o \
	XlibAsync.o \
	XlibInt.o \
	Xrm.o \
	Xstreams.o \
	evtomask.o \
	globals.o \
	GetGCVals.o \
	GetNrmHint.o \
	GetRGBCMap.o \
	GetTxtProp.o \
	GetWMCMapW.o \
	GetWMProto.o \
	Iconify.o \
	PixFormats.o \
	PropAlloc.o \
	ReconfWM.o \
	SetNrmHint.o \
	SetRGBCMap.o \
	SetTxtProp.o \
	SetWMCMapW.o \
	SetWMProto.o \
	StrToText.o \
	TextToStr.o \
	Withdraw.o \
	WMGeom.o \
	WMProps.o \
	$(AUTHOBJS) \
	$(XDMAUTHOBJS)

SRCS3 = \
	Lab.c \
	LabGcC.c \
	LabGcL.c \
	LabGcLC.c \
	LabMnL.c \
	LabMxC.c \
	LabMxL.c \
	LabMxLC.c \
	LabWpAj.c \
	Luv.c \
	LuvGcC.c \
	LuvGcL.c \
	LuvGcLC.c \
	LuvMnL.c \
	LuvMxC.c \
	LuvMxL.c \
	LuvMxLC.c \
	LuvWpAj.c \
	XYZ.c \
	uvY.c \
	xyY.c \
	HVC.c \
	HVCGcC.c \
	HVCGcV.c \
	HVCGcVC.c \
	HVCMnV.c \
	HVCMxC.c \
	HVCMxV.c \
	HVCMxVC.c \
	HVCMxVs.c \
	HVCWpAj.c \
	UNDEFINED.c \
	AddDIC.c \
	AddSF.c \
	cmsAllNCol.c \
	cmsAllCol.c \
	CCC.c \
	cmsCmap.c \
	cmsColNm.c \
	CvColW.c \
	CvCols.c \
	cmsGlobls.c \
	IdOfPr.c \
	cmsInt.c \
	LRGB.c \
	cmsLkCol.c \
	cmsMath.c \
	OfCCC.c \
	PrOfId.c \
	cmsProp.c \
	QBlack.c \
	QBlue.c \
	QGreen.c \
	QRed.c \
	QWhite.c \
	QuCol.c \
	QuCols.c \
	SetCCC.c \
	SetGetCols.c \
	StCol.c \
	StCols.c \
	cmsTrig.c \
	XRGB.c \
	FSWrap.c \
	ICWrap.c \
	IMWrap.c \
	lcWrap.c \
	mbWMProps.c \
	mbWrap.c \
	wcWrap.c \
	FilterEv.c \
	RegstFlt.c \
	locking.c \
	LockDis.c \
	$(LCSRCS)

OBJS3 = \
	Lab.o \
	LabGcC.o \
	LabGcL.o \
	LabGcLC.o \
	LabMnL.o \
	LabMxC.o \
	LabMxL.o \
	LabMxLC.o \
	LabWpAj.o \
	Luv.o \
	LuvGcC.o \
	LuvGcL.o \
	LuvGcLC.o \
	LuvMnL.o \
	LuvMxC.o \
	LuvMxL.o \
	LuvMxLC.o \
	LuvWpAj.o \
	XYZ.o \
	uvY.o \
	xyY.o \
	HVC.o \
	HVCGcC.o \
	HVCGcV.o \
	HVCGcVC.o \
	HVCMnV.o \
	HVCMxC.o \
	HVCMxV.o \
	HVCMxVC.o \
	HVCMxVs.o \
	HVCWpAj.o \
	UNDEFINED.o \
	AddDIC.o \
	AddSF.o \
	cmsAllNCol.o \
	cmsAllCol.o \
	CCC.o \
	cmsCmap.o \
	cmsColNm.o \
	CvColW.o \
	CvCols.o \
	cmsGlobls.o \
	IdOfPr.o \
	cmsInt.o \
	LRGB.o \
	cmsLkCol.o \
	cmsMath.o \
	OfCCC.o \
	PrOfId.o \
	cmsProp.o \
	QBlack.o \
	QBlue.o \
	QGreen.o \
	QRed.o \
	QWhite.o \
	QuCol.o \
	QuCols.o \
	SetCCC.o \
	SetGetCols.o \
	StCol.o \
	StCols.o \
	cmsTrig.o \
	XRGB.o \
	FSWrap.o \
	ICWrap.o \
	IMWrap.o \
	lcWrap.o \
	mbWMProps.o \
	mbWrap.o \
	wcWrap.o \
	FilterEv.o \
	RegstFlt.o \
	locking.o \
	LockDis.o \
	$(LCOBJS)

#if BuildXsi

#if BuildLocalIM
LIMSRCS = XLocalIM.c
LIMOBJS = XLocalIM.o
#endif

LCSYMSRCS = \
	ProtoFlt.c \
	XCnvCTToWC.c \
	XCnvMBToCT.c \
	XCnvWCToMB.c \
	XCnvToStr.c \
	XConnIM.c \
	XCrFntSet.c \
	XCrIC.c \
	XGetIMVal.c \
	XICFocus.c \
	XICGetVal.c \
	XICSetVal.c \
	XIMKeyBind.c \
	XIMProto.c \
	XIMQueue.c \
	XInitCT.c \
	$(LIMSRCS) \
	XOpenIM.c \
	XParseCT.c \
	XlcAccess.c \
	XlcDefLd.c \
	XlcLoad.c \
	XmbDeGlyph.c \
	XmbPrpText.c \
	XmbText.c \
	XmbTextExt.c \
	XmbTextPer.c \
	XmbTextPrp.c \
	XwcDeGlyph.c \
	XwcPrpText.c \
	XwcText.c \
	XwcTextExt.c \
	XwcTextPer.c \
	XwcTextPrp.c

LCSRCS = \
	SetLocale.c \
	$(LCSYMSRCS)

LCOBJS = \
	SetLocale.o \
	ProtoFlt.o \
	XCnvCTToWC.o \
	XCnvMBToCT.o \
	XCnvWCToMB.o \
	XCnvToStr.o \
	XConnIM.o \
	XCrFntSet.o \
	XCrIC.o \
	XGetIMVal.o \
	XICFocus.o \
	XICGetVal.o \
	XICSetVal.o \
	XIMKeyBind.o \
	XIMProto.o \
	XIMQueue.o \
	XInitCT.o \
	$(LIMOBJS) \
	XOpenIM.o \
	XParseCT.o \
	XlcAccess.o \
	XlcDefLd.o \
	XlcLoad.o \
	XmbDeGlyph.o \
	XmbPrpText.o \
	XmbText.o \
	XmbTextExt.o \
	XmbTextPer.o \
	XmbTextPrp.o \
	XwcDeGlyph.o \
	XwcPrpText.o \
	XwcText.o \
	XwcTextExt.o \
	XwcTextPer.o \
	XwcTextPrp.o

#define LCRules()							@@\
LinkSourceFile(XIMlibint.h,Xsi)						@@\
LinkSourceFile(XIMproto.h,Xsi)						@@\
LinkSourceFile(Xi18nint.h,Xsi)						@@\
LinkSourceFile(Xlocaleint.h,Xsi)					@@\
LinkSourceFile(wcharint.h,Xsi)						@@\
LinkSourceFile(ProtoFlt.c,Xsi)						@@\
LinkSourceFile(TextBody.c,Xsi)						@@\
LinkSourceFile(TextEscBd.c,Xsi)						@@\
LinkSourceFile(TextExtBd.c,Xsi)						@@\
LinkSourceFile(TextPerBd.c,Xsi)						@@\
LinkSourceFile(XCnvCTToWC.c,Xsi)					@@\
LinkSourceFile(XCnvMBToCT.c,Xsi)					@@\
LinkSourceFile(XCnvWCToMB.c,Xsi)					@@\
LinkSourceFile(XCnvToStr.c,Xsi)						@@\
LinkSourceFile(XConnIM.c,Xsi)						@@\
LinkSourceFile(XCrFntSet.c,Xsi)						@@\
LinkSourceFile(XCrIC.c,Xsi)						@@\
LinkSourceFile(XGetIMVal.c,Xsi)						@@\
LinkSourceFile(XICFocus.c,Xsi)						@@\
LinkSourceFile(XICGetVal.c,Xsi)						@@\
LinkSourceFile(XICSetVal.c,Xsi)						@@\
LinkSourceFile(XIMKeyBind.c,Xsi)					@@\
LinkSourceFile(XIMProto.c,Xsi)						@@\
LinkSourceFile(XIMQueue.c,Xsi)						@@\
LinkSourceFile(XInitCT.c,Xsi)						@@\
LinkSourceFile(XLocalIM.c,Xsi)						@@\
LinkSourceFile(XOpenIM.c,Xsi)						@@\
LinkSourceFile(XParseCT.c,Xsi)						@@\
LinkSourceFile(XlcAccess.c,Xsi)						@@\
LinkSourceFile(XlcDefLd.c,Xsi)						@@\
LinkSourceFile(XlcLoad.c,Xsi)						@@\
LinkSourceFile(XmbDeGlyph.c,Xsi)					@@\
LinkSourceFile(XmbPrpText.c,Xsi)					@@\
LinkSourceFile(XmbText.c,Xsi)						@@\
LinkSourceFile(XmbTextExt.c,Xsi)					@@\
LinkSourceFile(XmbTextPer.c,Xsi)					@@\
LinkSourceFile(XmbTextPrp.c,Xsi)					@@\
LinkSourceFile(XwcDeGlyph.c,Xsi)					@@\
LinkSourceFile(XwcPrpText.c,Xsi)					@@\
LinkSourceFile(XwcText.c,Xsi)						@@\
LinkSourceFile(XwcTextExt.c,Xsi)					@@\
LinkSourceFile(XwcTextPer.c,Xsi)					@@\
LinkSourceFile(XwcTextPrp.c,Xsi)					@@\
SpecialCLibObjectRule(XConnIM,$(ICONFIGFILES),$(CONN_DEFINES) $(SOCK_DEFINES))		@@\
SpecialCLibObjectRule(XlcLoad,$(ICONFIGFILES),$(NLS_DEFINES) $(RCONST_DEFINES))		@@\
SpecialCLibObjectRule(XLocalIM,$(ICONFIGFILES),$(NLS_DEFINES) $(RCONST_DEFINES))	@@\
SpecialCLibObjectRule(XCrFntSet,$(_NOOP_),$(RCONST_DEFINES))		@@\
SpecialCLibObjectRule(XCrIC,$(_NOOP_),$(RCONST_DEFINES))		@@\
SpecialCLibObjectRule(XOpenIM,$(_NOOP_),$(RCONST_DEFINES))		@@\
SpecialCLibObjectRule(XlcDefLd,$(_NOOP_),$(RCONST_DEFINES))

#endif /* BuildXsi */

#if BuildXimp

#ifdef XlibI18nPath
XLIBI18N_PATH = XlibI18nPath
#else
XLIBI18N_PATH = $(LIBDIR)
#endif
SRCH_DEFINES = -DXLIBI18N_PATH=\"$(XLIBI18N_PATH)\"

LCSYMSRCS = \
	XimpCT.c \
	XimpCallbk.c \
	XimpConv.c \
	XimpCrFS.c \
	XimpDefCnv.c \
	XimpDrStr.c \
	XimpEUC.c \
	XimpExten.c \
	XimpIC.c \
	XimpICG.c \
	XimpICS.c \
	XimpIM.c \
	XimpLCUtil.c \
	XimpLCd.c \
	XimpLkup.c \
	XimpLocal.c \
	XimpMCT.c \
	XimpMDrS.c \
	XimpMEsc.c \
	XimpMExt.c \
	XimpMPer.c \
	XimpMPrTxt.c \
	XimpMTxtPr.c \
	XimpParser.c \
	XimpPrTxt.c \
	XimpTxtPr.c \
	XimpRm.c \
	XimpSJIS.c \
	XimpTxtEsc.c \
	XimpTxtExt.c \
	XimpTxtPer.c \
	XimpWCT.c \
	XimpWDrS.c \
	XimpWEsc.c \
	XimpWExt.c \
	XimpWPer.c \
	XimpWPrTxt.c \
	XimpWTxtPr.c \
	XimpXConv.c \
	Ximpint.c

LCSRCS = \
	SetLocale.c \
	$(LCSYMSRCS)

LCOBJS = \
	SetLocale.o \
	XimpCT.o \
	XimpCallbk.o \
	XimpConv.o \
	XimpCrFS.o \
	XimpDefCnv.o \
	XimpEUC.o \
	XimpExten.o \
	XimpIC.o \
	XimpICG.o \
	XimpICS.o \
	XimpIM.o \
	XimpLCUtil.o \
	XimpLCd.o \
	XimpLkup.o \
	XimpLocal.o \
	XimpMCT.o \
	XimpMDrS.o \
	XimpMEsc.o \
	XimpMExt.o \
	XimpMPer.o \
	XimpMPrTxt.o \
	XimpMTxtPr.o \
	XimpRm.o \
	XimpSJIS.o \
	XimpWCT.o \
	XimpWDrS.o \
	XimpWEsc.o \
	XimpWExt.o \
	XimpParser.o \
	XimpWPer.o \
	XimpWPrTxt.o \
	XimpWTxtPr.o \
	XimpXConv.o \
	Ximpint.o

#define LCRules()							@@\
LinkSourceFile(XIMProto.h,Ximp)						@@\
LinkSourceFile(Ximplc.h,Ximp)						@@\
LinkSourceFile(XimpCT.c,Ximp)						@@\
LinkSourceFile(XimpCallbk.c,Ximp)					@@\
LinkSourceFile(XimpConv.c,Ximp)						@@\
LinkSourceFile(XimpCrFS.c,Ximp)						@@\
LinkSourceFile(XimpDefCnv.c,Ximp)					@@\
LinkSourceFile(XimpDrStr.c,Ximp)					@@\
LinkSourceFile(XimpEUC.c,Ximp)						@@\
LinkSourceFile(XimpExten.c,Ximp)					@@\
LinkSourceFile(XimpIC.c,Ximp)						@@\
LinkSourceFile(XimpICG.c,Ximp)						@@\
LinkSourceFile(XimpICS.c,Ximp)						@@\
LinkSourceFile(XimpIM.c,Ximp)						@@\
LinkSourceFile(XimpLCUtil.c,Ximp)					@@\
LinkSourceFile(XimpLCd.c,Ximp)						@@\
LinkSourceFile(XimpLkup.c,Ximp)						@@\
LinkSourceFile(XimpLocal.c,Ximp)					@@\
LinkSourceFile(XimpMCT.c,Ximp)						@@\
LinkSourceFile(XimpMDrS.c,Ximp)						@@\
LinkSourceFile(XimpMEsc.c,Ximp)						@@\
LinkSourceFile(XimpMExt.c,Ximp)						@@\
LinkSourceFile(XimpMPer.c,Ximp)						@@\
LinkSourceFile(XimpMPrTxt.c,Ximp)					@@\
LinkSourceFile(XimpMTxtPr.c,Ximp)					@@\
LinkSourceFile(XimpParser.c,Ximp)					@@\
LinkSourceFile(XimpPrTxt.c,Ximp)					@@\
LinkSourceFile(XimpRm.c,Ximp)						@@\
LinkSourceFile(XimpSJIS.c,Ximp)						@@\
LinkSourceFile(XimpTxtPr.c,Ximp)					@@\
LinkSourceFile(XimpTxtEsc.c,Ximp)					@@\
LinkSourceFile(XimpTxtExt.c,Ximp)					@@\
LinkSourceFile(XimpTxtPer.c,Ximp)					@@\
LinkSourceFile(XimpWCT.c,Ximp)						@@\
LinkSourceFile(XimpWDrS.c,Ximp)						@@\
LinkSourceFile(XimpWEsc.c,Ximp)						@@\
LinkSourceFile(XimpWExt.c,Ximp)						@@\
LinkSourceFile(XimpWPer.c,Ximp)						@@\
LinkSourceFile(XimpWPrTxt.c,Ximp)					@@\
LinkSourceFile(XimpWTxtPr.c,Ximp)					@@\
LinkSourceFile(XimpXConv.c,Ximp)					@@\
LinkSourceFile(Ximpint.c,Ximp)						@@\
SpecialCLibObjectRule(XimpLCUtil,$(ICONFIGFILES),$(SRCH_DEFINES))

#endif /* BuildXimp */

OBJS = $(OBJS1) $(OBJS2) $(OBJS3)

#include <Library.tmpl>

SpecialCLibObjectRule(ErrDes,$(ICONFIGFILES),$(EDB_DEFINES))
SpecialCLibObjectRule(StrKeysym,$(ICONFIGFILES),$(KDB_DEFINES))
SpecialCLibObjectRule(ConnDis,$(ICONFIGFILES),$(XDMAUTHDEFS) $(RPCDEFS) $(CONN_DEFINES) $(SOCK_DEFINES) $(POLL_DEFINES))
SpecialCLibObjectRule(OpenDis,$(ICONFIGFILES),$(BC_DEFINES) $(DEPEND_DEFINES))
SpecialCLibObjectRule(Wrap,$(ICONFIGFILES),$(XDMAUTHDEFS))
SpecialCLibObjectRule(Xstreams,$(ICONFIGFILES),$(CONN_DEFINES))
SpecialCLibObjectRule(XlibInt,$(ICONFIGFILES),$(CONN_DEFINES) $(MTT_DEFINES) $(POLL_DEFINES))
SpecialCLibObjectRule(cmsColNm,$(ICONFIGFILES),$(CMS_DEFINES))
SpecialCLibObjectRule(globals,$(ICONFIGFILES),$(CONN_DEFINES))
SpecialCLibObjectRule(Context,$(ICONFIGFILES),$(BC_DEFINES))
SpecialCLibObjectRule(Xrm,$(_NOOP_),$(RCONST_DEFINES))
SpecialCLibObjectRule(locking,$(ICONFIGFILES),$(MTT_DEFINES))
LCRules()

#if InstallXcmsTxt
InstallNonExecFile(Xcms.txt,$(LIBDIR))
#endif
InstallNonExecFile(XErrorDB,$(LIBDIR))
InstallNonExecFile(XKeysymDB,$(LIBDIR))
InstallLintLibrary(X11,$(LINTLIBDIR))


LinkSourceFile(AuDispose.c,$(XAUTHSRC))
LinkSourceFile(AuGetBest.c,$(XAUTHSRC))
LinkSourceFile(AuFileName.c,$(XAUTHSRC))
LinkSourceFile(AuRead.c,$(XAUTHSRC))
LinkSourceFile(Wrap.h,$(XDMCPLIBSRC))
LinkSourceFile(Wrap.c,$(XDMCPLIBSRC))
LinkSourceFile(Wraphelp.c,$(XDMCPLIBSRC))

MAKEKEYS = ./makekeys

ks_tables.h: $(INCLUDESRC)/keysymdef.h util/makekeys.c
	RemoveFiles($@ ProgramTargetName(makekeys) makekeys.Osuf)
	-LinkRule(makekeys,$(CFLAGS) $(LOCAL_LDFLAGS),util/makekeys.c,$(LDLIBS))
	RunProgram(MAKEKEYS,< $(INCLUDESRC)/keysymdef.h > ks_tables_h)
	$(MV) ks_tables_h $@
	RemoveFiles(ProgramTargetName(makekeys) makekeys.Osuf ks_tables_h)

includes:: ks_tables.h

depend:: ks_tables.h

clean::
	RemoveFiles(ks_tables_h ks_tables.h ProgramTargetName(makekeys))

DependTarget3($(SRCS1),$(SRCS2),$(SRCS3))
