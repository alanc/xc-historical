# $XConsortium: Imakefile,v 1.18 90/06/07 11:04:18 rws Exp $

#if BuildPexClients
#define IHaveSubdirs
#define PassCDebugFlags 'CDEBUGFLAGS=$(CDEBUGFLAGS)'
      SUBDIRS = PEX
#endif

    DEFINES = ExtensionDefines
IMAKE_DEFINES = $(DEFINES)
  SHAPESRCS = shapetest.c
  SHAPEOBJS = shapetest.o
#ifdef MITSHM
    SHMSRCS = shmtest.c
    SHMOBJS = shmtest.o
#else
    SHMSRCS = /* nothing */
    SHMOBJS = /* nothing */
#endif
   MBUFSRCS = xmbufinfo.c
   MBUFOBJS = xmbufinfo.o
   INCLUDES = -I$(TOP) -I$(INCLUDESRC) -I../include
       SRCS = $(SHAPESRCS) $(SHMSRCS) $(MBUFSRCS)
       OBJS = $(SHAPEOBJS) $(SHMOBJS) $(MBUFOBJS)

#ifdef MITSHM
all:: shapetest shmtest xmbufinfo
#else
all:: shapetest xmbufinfo
#endif

NormalProgramTarget(xmbufinfo,$(MBUFOBJS),$(DEPXLIB),$(XLIB), /**/)
NormalProgramTarget(shapetest,$(SHAPEOBJS),$(DEPXLIB),$(XLIB), /**/)
#ifdef MITSHM
NormalProgramTarget(shmtest,$(SHMOBJS),$(DEPXLIB),$(XLIB), /**/)
#endif

DependTarget()

#ifdef IHaveSubdirs
MakeSubdirs($(SUBDIRS))
DependSubdirs($(SUBDIRS))
#endif
