##
# $XConsortium: Imakefile,v 5.3 91/02/16 09:48:37 rws Exp $
##
## 
## Copyright 1989, 1990, 1991 by Sun Microsystems, Inc. and the X Consortium.
## 
##			 All Rights Reserved
## 
## Permission to use, copy, modify, and distribute this software and its 
## documentation for any purpose and without fee is hereby granted, 
## provided that the above copyright notice appear in all copies and that
## both that copyright notice and this permission notice appear in 
## supporting documentation, and that the names of Sun Microsystems,
## the X Consortium, and MIT not be used in advertising or publicity 
## pertaining to distribution of the software without specific, written 
## prior permission.  
## 
## SUN MICROSYSTEMS DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, 
## INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO
## EVENT SHALL SUN MICROSYSTEMS BE LIABLE FOR ANY SPECIAL, INDIRECT OR
## CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF
## USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
## OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
## PERFORMANCE OF THIS SOFTWARE.

#define PassCDebugFlags

#ifndef PexPhigsCDebugFlags
#define PexPhigsCDebugFlags OptimizedCDebugFlags
#endif

CDEBUGFLAGS = PexPhigsCDebugFlags
    DEFINES = PexPhigsDefines

     LIBCODE = libcp.a

CSRCS = cp_util.c cp_ccom.c cp_rcom.c cp_inp.c psl.c \
	cpx_clnt.c cpx_util.c cpx_css.c cpx_ws.c cpx_ar.c cpx_misc.c cpx_pm.c \
	cpa_clnt.c cpa_util.c cpa_css.c cpa_ws.c cpa_pm.c \
	cpb_clnt.c cpb_util.c cpb_css.c cpb_ws.c cpb_pm.c \
	cpm_xevnt.c cpm_tlkt.c

OBJS = cp_util.o cp_ccom.o cp_rcom.o cp_inp.o psl.o \
	cpx_clnt.o cpx_util.o cpx_css.o cpx_ws.o cpx_ar.o cpx_misc.o cpx_pm.o \
	cpa_clnt.o cpa_util.o cpa_css.o cpa_ws.o cpa_pm.o \
	cpb_clnt.o cpb_util.o cpb_css.o cpb_ws.o cpb_pm.o \
	cpm_xevnt.o cpm_tlkt.o

HSRCS = cp_priv.h

ASRCS = $(CSRCS) $(HSRCS)

MONLIBS = ../libphigs.a $(XAWLIB) $(XTOOLLIB) $(XMULIB) $(XLIB) $(LDLIBS) -lm

.SUFFIXES: .o .a .lint

   PEXAPIINC = -I../include
  PEXINCLUDE = -I../../../include/PEX
    INCLUDES = $(PEXAPIINC) $(PEXINCLUDE) -I../../../../X11

LINTOPTS = -uv
LINT_LIBS = ../util/llib-lut.ln ../error/llib-lerr.ln ../pex/llib-lpex.ln \
		../ws_type/llib-lwst.ln ../ws/llib-lws.ln ../input/llib-linp.ln
XLINT_LIBS = $(LINTXTOOL) $(LINTXLIB)
LINT_FILTER_FILE = ../include/lint_filter_strings
LINT_FILTER = fgrep -v -f $(LINT_FILTER_FILE) | cat

all:: Pex

extract : $(ASRCS)

Pex: ${OBJS}
	@echo "putting off ar of $(LIBCODE)"
#	ar rl $(LIBCODE) $(OBJS)

# Force Re-Compliation
FRC:
	@echo "forcing remake"

CHILD = phigsmon
$(CHILD) : $(CHILD).o
	$(CC) $(CFLAGS) $@.o -o $@ $(MONLIBS) $(EXTRA_LOAD_FLAGS)

lint:   $(ASRCS)
	$(LINT) $(CSRCS) $(LINTFLAGS) $(LINT_LIBS) | $(LINT_FILTER)

lint-x: $(ASRCS)
	$(LINT) $(CSRCS) $(LINTFLAGS) $(LINT_LIBS) $(XLINT_LIBS) | $(LINT_FILTER)

lintlib : llib-lcp.ln

llib-lcp.ln : $(ASRCS)
	$(LINT) $(CSRCS) $(LINTFLAGS) -Ccp | $(LINT_FILTER)

.c.lint:
	$(LINT) $< $(LINTFLAGS) $(LINT_LIBS) $(XLINT_LIBS) | $(LINT_FILTER)

#ifdef HPArchitecture
SpecialObjectRule(hpext.o, $(IRULESRC)/$(MACROFILE), $(EXT_DEFINES))
#endif

SRCS = $(CSRCS) $(HSRCS) $(CHILD).c

DependTarget()
