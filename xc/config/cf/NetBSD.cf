XCOMM platform:  $XConsortium: NetBSD.cf,v 1.2 94/11/21 17:13:14 kaleb Exp kaleb $

#define OSName		NetBSD
#define	OSVendor	/**/
XCOMM operating system:  OSName
#define OSMajorVersion    0
#define OSMinorVersion    9

#define HasPutenv       YES
#define HasBSD44Sockets YES

#define CppCmd          /usr/libexec/cpp -traditional
#define PreProcessCmd   /usr/libexec/cpp -traditional
#undef  InstallCmd
#define InstallCmd /usr/bin/install
#undef	TblCmd
#define	TblCmd /usr/bin/tbl
#undef	EqnCmd
#define	EqnCmd /usr/bin/eqn -Tascii
          COL = /usr/bin/col
         NEQN = /usr/bin/neqn
        NROFF = /usr/bin/nroff

#define UseGas		YES
#ifndef GccUsesGas
# define GccUsesGas	YES
#endif

#ifndef AsmDefines
# define AsmDefines -DUSE_GAS
#endif

#if GccUsesGas
# define GccGasOption -DGCCUSESGAS
#else
# define GccGasOption /**/
#endif

#ifndef HasGcc2
# define HasGcc2 YES
#endif

#define CcCmd gcc
#define DefaultCCOptions /**/

#ifdef __i386__
#define OptimizedCDebugFlags -m486 -O2
#define ServerOSDefines	-DDDXTIME
#else
#define OptimizedCDebugFlags -O2
#define ServerOSDefines /**/
#endif
#define ServerExtraDefines GccGasOption -DSTATIC_COLOR -DAVOID_GLYPHBLT

#define StandardDefines	-DCSRG_BASED
#define XawI18nDefines  -DUSE_XWCHAR_STRING -DUSE_XMBTOWC

#define TroffCmd        groff -Tps
#define SetTtyGroup     YES
#define HasNdbm         YES
#define HasShm          YES

#define HasLibCrypt	YES

#define AvoidNullMakeCommand YES

XCOMM Man pages need to be formatted when installed, so override the default
XCOMM imake rules.

#define ManSuffix	1
#define ManSourcePath	$(MANPATH)/cat

#define InstallManPageLong(file,destdir,dest)                           @@\
all:: file.0								@@\
									@@\
file.0:: file.man							@@\
	@if [ -f file.man ]; \						@@\
	then \								@@\
	cat file.man | $(NEQN) | $(TBL) | $(NROFF) -man | $(COL) >/tmp/$$$$.man; \	@@\
	cp /tmp/$$$$.man file.0; \					@@\
	$(RM) /tmp/$$$$.man; \						@@\
	fi 								@@\
									@@\
file.man::								@@\
									@@\
install.man::                                                           @@\
	MakeDir($(DESTDIR)destdir)					@@\
	-@if [ -f file.0 ]; \						@@\
	then \								@@\
	$(INSTALL) -c $(INSTMANFLAGS) file.0 $(DESTDIR)destdir/dest.0; \@@\
	fi

#define InstallMultipleManSuffix(list,dest,suff)                        @@\
install.man:: 								@@\
	MakeDir($(DESTDIR)dest)						@@\
	case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@\
	for i in list; do \                                             @@\
	  (set -x; \							@@\
	  cat $$i.suff | $(NEQN) | $(TBL) | $(NROFF) -man | $(COL) >/tmp/$$$$.suff; \	@@\
	  $(INSTALL) -c $(INSTMANFLAGS) /tmp/$$$$.suff $(DESTDIR)dest/$$i.0; \	@@\
	  $(RM) /tmp/$$$$.suff); \						@@\
	done

#define InstallMultipleMan(list,dest)                                   @@\
	InstallMultipleManSuffix(list,dest,man)

#define InstallManPageAliases(file,destdir,aliases)                     @@\
install.man:: 								@@\
	@case '${MFLAGS}' in *[i]*) set +e;; esac; \                    @@\
	for i in aliases; do \                                          @@\
		(set -x; \						@@\
		$(RM) $(DESTDIR)destdir/$$i.0;\  				@@\
		$(LN) destdir/file.0 $(DESTDIR)destdir/$$i.0;\  @@\
		); \							@@\
	done

#define NetBSDArchitecture

#include <bsdLib.rules>

#ifdef __i386__
# include <xfree86.cf>
#endif
#define HasWChar32      YES
