/*
 * Library imakefile info  - this contains any special redefinitions, etc.
 * that Imakefiles in the various library subtrees will need.
 *
 * Before including this, you must set the following boolean variables:
 * DoNormalLib, DoSharedLib, DoDebugLib, DoProfileLib
 */

XCOMM $XConsortium: Library.tmpl,v 1.3 90/11/30 11:15:30 rws Exp $

         CC = LibraryCcCmd
  CCOPTIONS = LibraryCCOptions
STD_DEFINES = $(SHLIBDEF) LibraryDefines
CDEBUGFLAGS = LibraryCDebugFlags

#if DoDebugLib
#define _DebuggedLibMkdir() LibMkdir(debugger)
#define _DebuggedObjCompile(options) DebuggedLibObjCompile(options)
#define _DebuggedCleanDir() LibCleanDir(debugger)
#else
#define _DebuggedLibMkdir() @XCOMM
#define _DebuggedObjCompile(options) @XCOMM
#define _DebuggedCleanDir() @XCOMM
#endif

#if DoProfileLib
#define _ProfiledLibMkdir() LibMkdir(profiled)
#define _ProfiledObjCompile(options) ProfiledLibObjCompile(options)
#define _ProfiledCleanDir() LibCleanDir(profiled)
#else
#define _ProfiledLibMkdir() @XCOMM
#define _ProfiledObjCompile(options) @XCOMM
#define _ProfiledCleanDir() @XCOMM
#endif

#if DoSharedLib && DoNormalLib
#define _SharedLibMkdir() LibMkdir(shared)
#define _SharedObjCompile(options) SharedLibObjCompile(options)
#define _SharedCleanDir() LibCleanDir(shared)
#else
#define _SharedLibMkdir() @XCOMM
#define _SharedObjCompile(options) @XCOMM
#define _SharedCleanDir() @XCOMM
#endif

#if DoSharedLib && !DoNormalLib
#define _NormalObjCompile(options) NormalSharedLibObjCompile(options)
#else
#define _NormalObjCompile(options) NormalLibObjCompile(options)
#endif

#ifndef LibraryObjectRule
#define LibraryObjectRule()						@@\
all::									@@\
	_DebuggedLibMkdir()						@@\
	_ProfiledLibMkdir()						@@\
	_SharedLibMkdir()						@@\
									@@\
.c.o:									@@\
	_DebuggedObjCompile( /**/)					@@\
	_ProfiledObjCompile( /**/)					@@\
	_SharedObjCompile( /**/)					@@\
	_NormalObjCompile( /**/)					@@\
									@@\
clean::									@@\
	_DebuggedCleanDir()						@@\
	_ProfiledCleanDir()						@@\
	_SharedCleanDir()

#endif /* LibraryObjectRule */

#ifndef SpecialLibObjectRule
#define SpecialLibObjectRule(objs,depends,options)			@@\
objs: depends								@@\
	_DebuggedObjCompile(options)					@@\
	_ProfiledObjCompile(options)					@@\
	_SharedObjCompile(options)					@@\
	_NormalObjCompile(options)					@@\

#endif /* SpecialLibObjectRule */
