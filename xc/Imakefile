#define IHaveSubdirs
#define PassCDebugFlags

      WORLDOPTS = -k
BOOTSTRAPCFLAGS = 

#if MakeContributed
    CONTRIBDIRS = $(CONTRIBSRC)
#endif

#
# Preserve this order: include comes first, clients, demos, contrib come last.
#
  LIBDIRSTOMAKE = \
		$(INCLUDESRC) \
		$(LIBSRC) \
		$(EXTENSIONSRC) 
#ifndef ClientSideOnly
SERVERDIRSTOMAKE = \
		$(SERVERSRC) \
		$(FONTSRC) 
#endif
CLIENTDIRSTOMAKE = \
		$(CLIENTSRC) \
		$(DEMOSRC) \
		$(EXAMPLESRC) \
		$(CONTRIBDIRS)
     DIRSTOMAKE = \
		$(LIBDIRSTOMAKE) \
		$(SERVERDIRSTOMAKE) \
		$(CLIENTDIRSTOMAKE) 
        SUBDIRS = \
		$(DIRSTOMAKE) \
		$(UTILSRC) \
		$(XMANSRC)
  LNINSTALLDIRS = \
		$(EXTENSIONSRC) \
		$(LIBSRC)

MakeSubdirs($(DIRSTOMAKE) $(RGBSRC) $(XMANSRC))

install.ln::
	-mkdir $(LINTLIBDIR)

MakeLintSubdirs($(LNINSTALLDIRS),install.ln,install.ln)

MakeLintSubdirs($(LNINSTALLDIRS),external.ln,lintlib)

#
# before depending, be sure that include has everything in it.
#
depend::
	cd $(INCLUDESRC); $(MAKE)

DependSubdirs($(SUBDIRS))

install::
	-mkdir $(USRLIBDIR)
	-mkdir $(BINDIR)
	-mkdir $(LIBDIR)
	-mkdir $(XAPPLOADDIR)
	-mkdir $(INCDIR)
	-mkdir $(UWMDIR)
	-mkdir $(MANPATH)
	-mkdir $(MANDIR)
	-mkdir $(LIBMANDIR)

#ifdef ClientSideOnly
install::
	-mkdir $(FONTDIR)
#endif


InstallManPage(X,$(MANDIR))

# don't name your log file make.log when you run this ...
World::
	cd $(IMAKESRC); $(MAKE) clean; $(MAKE) BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
	-$(MV) Makefile Makefile.bak
	$(MAKE) -f Makefile.bak Makefile
	$(MAKE) Makefiles
	$(MAKE) clean
	$(MAKE) depend
	$(MAKE) $(WORLDOPTS)

Everything::
	cd $(IMAKESRC); $(MAKE)
	-$(MV) Makefile Makefile.bak
	$(MAKE) -f Makefile.bak Makefile
	$(MAKE) Makefiles
	$(MAKE) depend
	$(MAKE) $(WORLDOPTS)
