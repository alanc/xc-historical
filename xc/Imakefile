#define IHaveSubdirs
#define PassCDebugFlags

      WORLDOPTS = -k
BOOTSTRAPCFLAGS = 
        CHECKFN = $(UTILSRC)/checkfn

#
# Preserve this order: include comes first, clients, demos, contrib come last.
#
  LIBDIRSTOMAKE = \
		$(INCLUDESRC) \
		$(LIBSRC) \
		$(EXTENSIONSRC) 
#ifndef ClientSideOnly
SERVERDIRSTOMAKE = \
		$(SERVERSRC) \
		$(FONTSRC) 
#endif
CLIENTDIRSTOMAKE = \
		$(CLIENTSRC) \
		$(DEMOSRC) \
		$(EXAMPLESRC)
     DIRSTOMAKE = \
		$(LIBDIRSTOMAKE) \
		$(SERVERDIRSTOMAKE) \
		$(CLIENTDIRSTOMAKE) 
        SUBDIRS = \
		$(DIRSTOMAKE) \
		$(UTILSRC) \
		$(XMANSRC)
  LNINSTALLDIRS = \
		$(EXTENSIONSRC) \
		$(LIBSRC)

MakeSubdirs($(DIRSTOMAKE) $(RGBSRC) $(XMANSRC))

install.ln::
	-mkdir $(LINTLIBDIR)

MakeLintSubdirs($(LNINSTALLDIRS),install.ln,install.ln)

MakeLintSubdirs($(LNINSTALLDIRS),external.ln,lintlib)

#
# before depending, be sure that include has everything in it.
#
depend::
	cd $(INCLUDESRC); $(MAKE)

DependSubdirs($(SUBDIRS))

install::
	-mkdir $(USRLIBDIR)
	-mkdir $(BINDIR)
	-mkdir $(LIBDIR)
	-mkdir $(XAPPLOADDIR)
	-mkdir $(INCDIR)
	-mkdir $(UWMDIR)
	-mkdir $(MANPATH)
	-mkdir $(MANDIR)
	-mkdir $(LIBMANDIR)

#ifndef ClientSideOnly
install::
	-mkdir $(FONTDIR)
#endif


InstallManPage(X,$(MANDIR))

/**/# don't name your log file make.log when you run this ...
World::
	@echo Beginning full build of the X Window System.
	date
	cd $(IMAKESRC); $(MAKE) clean; $(MAKE) BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
	-$(MV) Makefile Makefile.bak
	$(MAKE) -f Makefile.bak Makefile
	$(MAKE) Makefiles
	$(MAKE) clean
	$(MAKE) depend
	@echo Starting full compile.
	date
	$(MAKE) $(WORLDOPTS)
	@echo Build of the X Window System complete.
	date

Everything::
	cd $(IMAKESRC); $(MAKE)
	-$(MV) Makefile Makefile.bak
	$(MAKE) -f Makefile.bak Makefile
	$(MAKE) Makefiles
	$(MAKE) depend
	$(MAKE) $(WORLDOPTS)

/*
 * This section used for generating distributions will not be useful to most
 * people.
 */
/**/# check all filenames for length, letters, and content
checkfilenames::  $(CHECKFN)/checkfn
	@find . -type d -exec $(CHECKFN)/find.sh $(CHECKFN)/checkfn {} \;

