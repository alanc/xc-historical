XCOMM $XConsortium: Imakefile,v 5.24 93/07/19 10:25:34 rws Exp $
#include <Server.tmpl>

#if BuildXInputExt || BuildPexExt || BuildPexClients || BuildXIE
#define IHaveSubdirs
#endif

#if BuildXInputExt
  XINPUTDIRS = xinput
#endif
#if BuildPexExt
  PEXDIRS = PEX
#else
#if BuildPexClients
  PEXDIRS = PEX/dipex/swap
#endif
#endif
#if BuildXIE
  XIEDIRS = xie
#endif
#if BuildXTrapExt
  XTRAPDIRS = xtrap
#endif
#if BuildScreenSaverExt
SAVERSRCS = saver.c
SAVEROBJS = saver.o
#endif
#if HasShm
  SHMSRCS = shm.c
  SHMOBJS = shm.o
#endif
       SRCS = shape.c $(SHMSRCS) multibuf.c multibufpx.c multibufbf.c	\
              mitmisc.c xtest.c xtest1di.c xtest1dd.c sleepuntil.c	\
	      bigreq.c sync.c $(SAVERSRCS)
       OBJS = shape.o $(SHMOBJS) multibuf.o multibufpx.o multibufbf.o	\
              mitmisc.o xtest.o xtest1di.o xtest1dd.o sleepuntil.o	\
              bigreq.o sync.o $(SAVEROBJS)
   INCLUDES = -I../include -I$(INCLUDESRC) -I$(SERVERSRC)/include
   LINTLIBS = ../../server/dix/llib-ldix.ln ../../server/os/4.2bsd/llib-los.ln
        SUBDIRS = $(XINPUTDIRS) $(PEXDIRS) $(XIEDIRS) $(XTRAPDIRS)

NormalLibraryObjectRule()
NormalLibraryTarget(ext,$(OBJS))
LintLibraryTarget(ext,$(SRCS))
NormalLintTarget($(SRCS))

DependTarget()

#ifdef IHaveSubdirs
MakeSubdirs($(SUBDIRS))
DependSubdirs($(SUBDIRS))
#endif

#if HasSaberC
saber_src:
	/**/#load $(CFLAGS) $(SRCS)
#endif
