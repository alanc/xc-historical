#if InstallxdmConfig
#define IHaveSubdirs
#define PassCDebugFlags 'CDEBUGFLAGS=$(CDEBUGFLAGS)'

   XDMCONFIGDIR = config/default
         XDMDIR = /usr/lib/X11/xdm
        SUBDIRS = $(XDMCONFIGDIR)
#endif

LOCAL_LIBRARIES = $(XAWLIB) $(XMULIB) $(XTOOLLIB) $(XLIB)
          SRCS1 = buf.c daemon.c display.c displaylist.c dm.c error.c \
		  file.c greet.c pseudoreset.c resource.c \
		  session.c socket.c verify.c Login.c
          OBJS1 = buf.o daemon.o display.o displaylist.o dm.o error.o \
		  file.o greet.o pseudoreset.o resource.o \
		  session.o socket.o verify.o Login.o
          SRCS2 = xdmshell.c 
          OBJS2 = xdmshell.o 
       PROGRAMS = xdm xdmshell

#ifdef IHaveSubdirs
MakeSubdirs($(SUBDIRS))

install:: $(XDMDIR)
	cd $(XDMCONFIGDIR); make install XDMDIR=$(XDMDIR)

$(XDMDIR):
	-mkdir $(XDMDIR)
#endif

ComplexProgramTarget_1(xdm,$(LOCAL_LIBRARIES),)
SingleProgramTarget(xdmshell,$(OBJS2),,)

/*
 * Don't install; let people read the instructions about putting in the
 * abort-display() resource:
 *
 * InstallProgramWithFlags(xdmshell,$(BINDIR), )
 */
