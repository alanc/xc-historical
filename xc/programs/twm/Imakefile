/**/#
/**/#Here is an Imakefile for twm.  It depends on having TWMDIR defined
/**/#in Imake.tmpl.  I like to use Imakefiles for everything, and I am sure
/**/#other people do also, so perhaps you could do us all a favor and
/**/#distribute this one.
/**/#

/*
 * The following definitions will be removed when R4beta ships with the new
 * configuration control stuff.
 */
#ifndef SignalReturnProcType
#if defined(HPArchitecture) && OSMajorVersion <= 6 && OSMajorVersion <= 2
#define SignalReturnProcType int
#endif
#if defined(SunArchitecture)
#if OSMajorVersion <= 3
#define SignalReturnProcType int
#else
#define SignalReturnProcType void
#endif
#endif
#if defined(MacIIArchitecture)
#define SignalReturnProcType int
#endif
#if defined(UltrixArchitecture)
#define SignalReturnProcType void
#endif
#if defined(ApolloArchitecture)
#define SignalReturnProcType int
#endif
#ifndef SignalReturnProcType
#define SignalReturnProcType int	/* not correct, but works more often */
#endif
#endif

#ifndef HasPutenv
#if defined(SunArchitecture) || defined(UltrixArchitecture)
#define HasPutenv YES
#endif
#endif

#if HasPutenv
      PUTENVDEF = 
#else
      PUTENVDEF = -DNOPUTENV
#endif

       PROGRAMS = twm
LOCAL_LIBRARIES = $(EXTENSIONLIB) $(XMULIB) $(XLIB)
      OTHERSRCS = gram.y lex.l
         YFLAGS = -d
     OPTIONSDEF = -DSHAPE 
     SIGPROCDEF = -DSIGPROCTYPE=SignalReturnProcType
        DEFINES = $(SIGPROCDEF) $(OPTIONSDEF) $(PUTENVDEF)

SRCS1=	gram.c lex.c add_window.c gc.c list.c twm.c parse.c\
        menus.c events.c resize.c util.c version.c iconmgr.c\
	cursor.c icons.c

OBJS1=	gram.o lex.o add_window.o gc.o list.o twm.o parse.o\
        menus.o events.o resize.o util.o version.o iconmgr.o\
	cursor.o icons.o

all:: $(PROGRAMS)

depend:: lex.c gram.c

ComplexProgramTarget_1(twm,$(LOCAL_LIBRARIES),)

gram.h gram.c: gram.y
	yacc -d gram.y
	$(MV) y.tab.c gram.c
	$(MV) y.tab.h gram.h

clean::
	$(RM) y.tab.h y.tab.c lex.yy.c gram.h gram.c lex.c
