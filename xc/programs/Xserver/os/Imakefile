SRCS = connection.c WaitFor.c utils.c io.c access.c \
	 osinit.c oscolor.c osfonts.c fonttype.c
OBJS = connection.o WaitFor.o utils.o io.o osfonts.o access.o \
	 osinit.o oscolor.o osfonts.c fonttype.o
STD_DEFINES = ServerDefines -DFONT_SNF
CDEBUGFLAGS = ServerCDebugFlags
#if SpecialMalloc
OS_DEFINES= -DSPECIAL_MALLOC
#else
OS_DEFINES=
#endif

DEFINES= ConnectionFlags $(OS_DEFINES)
INCLUDES = -I.  -I../../include -I$(INCLUDESRC)
LINTLIBS = ../../dix/llib-ldix.ln

NormalLibraryObjectRule()
NormalLibraryTarget(os,$(OBJS))
LintLibraryTarget(os,$(SRCS))
NormalLintTarget($(SRCS))

# these depend on ConnectionFlags
access.o: $(IRULESRC)/$(MACROFILE)
connection.o: $(IRULESRC)/$(MACROFILE)

# this depends upon which fonts formats are supported
#fonttype.o: $(IRULESRC)/$(MACROFILE)

SpecialObjectRule(osinit.o, $(IRULESRC)/$(MACROFILE), -DADMPATH=\"$(ADMDIR)/X\%smsgs\")

DependTarget()
