XCOMM $XConsortium$
#include <Server.tmpl>

SRCS = cpq_driver.c cpq_bank.s

OBJS = cpq_driver.o cpq_bank.o

#if XF86LinkKit
VGA256DIR = ../../vga256
INCLUDES = -I. -I../../../include -I../..
#else
INCLUDES = -I. -I$(XF86COMSRC) -I$(XF86HWSRC) -I$(XF86OSSRC) \
	   -I../../../vga256/vga -I$(SERVERSRC)/include -I$(INCLUDESRC)
VGA256DIR = ../../../vga256/drivers
#endif

DEFINES = -DMONOVGA

NormalLibraryObjectRule()

NormalRelocatableTarget(cpq_drv, $(OBJS))

ObjectFromSpecialSource(cpq_driver,$(VGA256DIR)/compaq/cpq_driver,/**/)
ObjectFromSpecialAsmSource(cpq_bank,$(VGA256DIR)/compaq/cpq_bank,/**/)

InstallLinkKitNonExecFile(Imakefile,$(LINKKITDIR)/drivers/vga2/compaq)

DependTarget()
