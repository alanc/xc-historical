XCOMM $XConsortium: Imakefile,v 5.20 93/09/04 17:36:15 rws Exp $
#include <Server.tmpl>

#if defined(SparcArchitecture)
# if HasMITGXSource
GXSRC=sunGX.c
# else
GXSRC=
#  if SystemV4
GXOBJDIST=solGX.o.dist
#  else
GXOBJDIST=sunGX.o.dist
#  endif
# endif
GXOBJ=sunGX.o
#else
GXOBJ=
GXSRC=
#endif

SRCS1 =	sunInit.c \
	sunCfb.c \
	sunCursor.c \
	sunFbs.c \
	sunIo.c \
	sunKbd.c \
	sunMfb.c \
	sunMouse.c\
	$(GXSRC) \
	sunKeyMap.c

SRCS =	$(SRCS1) kbd_mode.c constype.c

#ifdef i386Architecture
OFILES = sunInit.o
#else
OFILES = sunInit.o sunInitMono.o sunInitExtMono.o
#endif

OBJS = 	sunCfb.o \
	sunCursor.o \
	sunFbs.o \
	sunIo.o \
	sunKbd.o \
	sunMfb.o \
	sunMouse.o \
	$(GXOBJ) \
	sunKeyMap.o

   INCLUDES = -I. -I../../mfb -I../../mi -I../../cfb -I../../include\
   		-I$(INCLUDESRC) -I$(FONTINCSRC)
   LINTLIBS = ../../dix/llib-ldix.ln ../../os/llib-los.ln \
	      ../mfb/llib-lmfb.ln ../mi/llib-lmi.ln ../cfb/llib-lcfb.ln

NormalLibraryObjectRule()

all:: $(OFILES) kbd_mode constype

lintlib:

NormalLibraryTarget(sun,$(OBJS))
NormalLintTarget($(SRCS1))

#if !HasMITGXSource
LinkFile(sunGX.o,$(GXOBJDIST))
#endif

#ifndef i386Architecture
sunInitExtMono.o: $(ICONFIGFILES)
ObjectFromSpecialSource(sunInitExtMono,../../mi/miinitext,-UPEXEXT)
ObjectFromSpecialSource(sunInitMono,sunInit,-DMONO_ONLY)
#endif

SingleProgramTarget(kbd_mode, kbd_mode.o,,)
SingleProgramTarget(constype, constype.o,,)
InstallProgram(kbd_mode,$(BINDIR))
InstallProgram(constype,$(BINDIR))
InstallManPage(kbd_mode,$(MANDIR))
InstallManPage(constype,$(MANDIR))
InstallManPage(Xsun,$(MANDIR))
#ifndef i386Architecture
InstallManPageAliases(Xsun,$(MANDIR),XsunMono)
#endif

DependTarget()
