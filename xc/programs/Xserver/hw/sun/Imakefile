XCOMM $XConsortium: Imakefile,v 5.15 92/12/03 10:37:37 rws Exp $
#include <Server.tmpl>

#ifdef SparcArchitecture
#if HasMITGXSource
GXSRC=sunGX.c
#else
GXSRC=
#endif
GXOBJ=sunGX.o
#else
GXOBJ=
GXSRC=
#endif

SRCS1 =	sunInit.c sunBW2.c sunCursor.c sunIo.c sunKbd.c sunMouse.c sunUtils.c \
	sunCG.c sunCG2C.c sunCG2M.c sunCG3C.c sunCG4C.c sunCG6C.c \
	$(GXSRC) sunKeyMap.c

OBJS1 = sunBW2.o sunCursor.o sunIo.o sunKbd.o sunMouse.o sunUtils.o \
	sunCG.o sunCG2C.o sunCG2M.o sunCG3C.o sunCG4C.o sunCG6C.o \
	$(GXOBJ) sunKeyMap.o

#if Xsun24Server
SRCS2 = sunCG8C.c
OBJS2 = sunCG8C.o
#endif

SRCS =	$(SRCS1) $(SRCS2) kbd_mode.c constype.c 

OFILES = sunInit.o sunInitMono.o sunInitExtMono.o

OBJS = $(OBJS1) $(OBJS2)

   INCLUDES = -I. -I../mfb -I../mi -I../cfb -I../../include\
   		-I$(INCLUDESRC) -I$(FONTSRC)/include
   LINTLIBS = ../../dix/llib-ldix.ln ../../os/llib-los.ln \
	      ../mfb/llib-lmfb.ln ../mi/llib-lmi.ln ../cfb/llib-lcfb.ln

NormalLibraryObjectRule()

all:: $(OFILES) kbd_mode constype

lintlib:

NormalLibraryTarget(sun,$(OBJS))
NormalLintTarget($(SRCS1) $(SRCS2))

#if !HasMITGXSource
LinkFile(sunGX.o,sunGX.o.dist)
#endif

#if Xsun24Server
SpecialCObjectRule(sunInit,$(ICONFIGFILES),-DDEPTH24)
#endif
sunInitExtMono.o: $(ICONFIGFILES)
ObjectFromSpecialSource(sunInitExtMono,../mi/miinitext,-DNOPEXEXT)
ObjectFromSpecialSource(sunInitMono,sunInit,-DMONO_ONLY)

SingleProgramTarget(kbd_mode,kbd_mode.o,NullParameter,NullParameter)
SingleProgramTarget(constype,constype.o,NullParameter,NullParameter)
InstallProgram(kbd_mode,$(BINDIR))
InstallProgram(constype,$(BINDIR))
InstallManPage(kbd_mode,$(MANDIR))
InstallManPage(constype,$(MANDIR))
InstallManPage(Xsun,$(MANDIR))
InstallManPageAliases(Xsun,$(MANDIR),XsunMono)

saber_src:
	#load $(CFLAGS) $(SRCS1) $(SRCS2)

DependTarget()
