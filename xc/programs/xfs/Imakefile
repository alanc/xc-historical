#undef ServerDefines
#include <Server.tmpl>
#define	IHaveSubdirs

#define PassCDebugFlags 'CDEBUGFLAGS=$(CDEBUGFLAGS)' 'CC=$(CC)' 'CCOPTIONS=$(CCOPTIONS)'

CC = ServerCcCmd
CCOPTIONS = ServerCCOptions
STD_DEFINES = ServerDefines
CDEBUGFLAGS = ServerCDebugFlags

OSDIR = os
OSLIB = $(OSDIR)/libos.a
DIFSDIR = difs
DIFSLIB = $(DIFSDIR)/libdifs.a
FONTDIR = $(FONTSRC)/lib
FONTLIB = $(FONTDIR)/libfont.a
SYSLIBS =
#ifdef HPArchitecture
BSDEMUL = $(LIBSRC)/Berk/Berklib.o
#endif

FSDIRS = $(OSDIR) $(DIFSDIR) $(PCFDIRS)
FSLIBS = $(DIFSLIB) $(FONTLIB) $(DIFSLIB) $(OSLIB) $(BSDEMUL)

SUBDIRS = $(FSDIRS)

all:: fs

ServerTarget(fs,$(FSDIRS),NullParameter,$(FSLIBS),$(SYSLIBS))

DependSubdirs($(FSDIRS))

$(FSDIRS):	FRC
	@cd $@; echo "making $@" ;	\
	$(MAKE) $(MFLAGS) PassCDebugFlags all

clean::
	$(RM) fs

FRC:
