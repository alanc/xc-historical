XCOMM $XConsortium$

#define IHaveSubdirs
#define PassCDebugFlags

       SUBDIRS = utils

          SRCS = xkbcomp.c xkbio.c xkbscan.c expr.c vmod.c misc.c \
		 keymap.c keycodes.c keytypes.c compat.c action.c \
		 symbols.c \
		 xkmout.c xkbout.c cout.c xkbparse.c
          OBJS = xkbcomp.o xkbio.o xkbscan.o expr.o vmod.o misc.o \
		 keymap.o keycodes.o keytypes.o compat.o action.o \
		 symbols.o \
		 xkmout.o xkbout.o cout.o \
		 xkbparse.o
        DEPLIBS = $(DEPXLIBONLY) utils/libutils.a
LOCAL_LIBRARIES = $(XLIB) utils/libutils.a

ROOT_DEFINES = -DDFLT_XKB_CONFIG_ROOT=\"$(LIBDIR)/xkb\"

EXTRA_INCLUDES = -Iutils -I$(EXTINCSRC)

MakeSubdirs($(SUBDIRS))

depend:: xkbparse.c

ComplexProgramTarget(xkbcomp)

SpecialCObjectRule(xkbio,$(ICONFIGFILES),$(ROOT_DEFINES))

xkbparse.c: xkbparse.y
	$(YACC) xkbparse.y
	$(MV) y.tab.c xkbparse.c

clean::
	RemoveFiles(y.tab.c xkbparse.c)

DependSubdirs($(SUBDIRS))

clean::
	RemoveFiles(test.h *.xkm)

